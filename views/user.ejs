<!DOCTYPE html>
<html lang="en" <% if(user != null){ %>data-theme="<%= user.theme %>" <% }else{ %> data-theme="dark" <% } %>>
<%- include("partials/header.ejs"); %>

<body>
  <%- include("partials/nav.ejs"); %>
  <div class="container" style="margin-top:32px;">
    <div class="row">
      <div class="col-md-2">

      </div>
      <div class="col-md-8">

        <h4 class="text-title"><%= target.firstname %> <%= target.lastname %></h4>
        <hr>
      </div>

    </div>

    <div class="row">
      <div class="col-md-2">

      </div>
      <div class="col-md-8">
        <div class="card" style="padding-left: 0; padding-right: 0;">
          <div class="card-head">
            <span class="card-head-title">Articles</span>
          </div>
          <div style="overflow-x:auto;">
            <table class="table table-dark" style="width:100%;">
              <thead>
                <tr>
                  <th scope="col">Cover</th>
                  <th scope="col">Title</th>
                  <th scope="col">Views</th>
                  <th scope="col">Published</th>
                  <th scope="col">Standing</th>
                </tr>
              </thead>
              <tbody>
                <% topics.forEach(function(topic){ %>
                <tr>
                  <td class="td-img" style="background-image:url(<%= topic.picture %>);"></td>
                  <td><a href="/topic/<%= topic._id %>" class="no-bs"><%= topic.title %></a></td>
                  <td><%= topic.views %></td>
                  <td class="text-<%= (topic.published)?'success':'warning' %>"><%= topic.published %></td>
                  <td class="text-<%= (topic.standing)<=0?'success':(topic.standing)>=2?'danger':'warning' %>"><%= (topic.standing)<=0?"Good":(topic.standing)>=2?"Poor":"Moderate" %></td>

                </tr>
                <% }); %>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>
  </div>
</body>

</html>

<%

function timeSince(date) {

  var seconds = Math.floor((new Date() - date) / 1000);

  var interval = Math.floor(seconds / 31536000);

  if (interval >= 1) {
    return interval + " years";
  }
  interval = Math.floor(seconds / 2592000);
  if (interval >= 1) {
    return interval + " months";
  }
  interval = Math.floor(seconds / 86400);
  if (interval >= 1) {
    return interval + " days";
  }
  interval = Math.floor(seconds / 3600);
  if (interval >= 1) {
    return interval + " hours";
  }
  interval = Math.floor(seconds / 60);
  if (interval >= 1) {
    return interval + " minutes";
  }
  return Math.floor(seconds) + " seconds";
}
var aDay = 24*60*60*1000
%>

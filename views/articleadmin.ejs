<!DOCTYPE html>
<html lang="en" <% if(user != null){ %>data-theme="<%= user.theme %>" <% }else{ %> data-theme="dark" <% } %>>
<%- include("partials/header.ejs"); %>

<body>
  <%- include("partials/nav.ejs"); %>
  <div class="container" style="margin-top:32px;">
    <div class="row">
      <div class="col-md-2">
        <%- include("partials/admintools.ejs")%>
      </div>

      <div class="col-md-9">

        <div class="card" style="padding-left: 0; padding-right: 0;">
          <div class="card-head">
            <span class="card-head-title">Current Articles</span>
          </div>
          <div style="overflow-x:auto;">
            <table class="table table-dark" style="width:100%;">
              <thead>
                <tr>
                  <th scope="col">Cover</th>
                  <th scope="col">Title</th>
                  <th scope="col">Views</th>
                  <th scope="col">Published</th>
                  <th scope="col">Standing</th>
                  <th scope="col">Actions</th>
                </tr>
              </thead>
              <tbody>
                <% topics.forEach(function(topic){ %>
                <tr>
                  <td class="td-img" style="background-image:url(<%= topic.picture %>);"></td>
                  <td><a href="/topic/<%= topic._id %>" class="no-bs"><%= topic.title %></a></td>
                  <td><%= topic.views %></td>
                  <td class="text-<%= (topic.published)?'success':'warning' %>"><%= topic.published %></td>
                  <td class="text-<%= (topic.standing)<=0?'success':(topic.standing)>=2?'danger':'warning' %>"><%= (topic.standing)<=0?"Good":(topic.standing)>=2?"Poor":"Moderate" %></td>
                  <td>
                    <div class="dropdown">
                      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Actions
                      </button>
                      <div class="dropdown-menu dropdown-menu-left" aria-labelledby="">
                        <h6 class="dropdown-header">Article Details</h6>
                        <a class="dropdown-item" href="/moderate/<%= (topic.published)?'unpublish':'publish' %>/<%= topic._id %>"><i class="fas fa-<%= (topic.published)?'times':'check' %> link-elem"></i><span
                            class="link-elem link-text"><%= (topic.published)?'Unpublish':'Publish' %></span></a>
                        <a class="dropdown-item" href="/topic/edit/<%= topic._id %>"><i class="fas fa-edit link-elem"></i><span class="link-elem link-text">Edit</span></a>
                        <h6 class="dropdown-header">Negative Actions</h6>
                        <a class="dropdown-item text-warning" href="/moderate/flag/<%= topic._id %>"><i class="fas fa-flag link-elem"></i><span class="link-elem link-text">Flag (<%= topic.standing %>)</span></a>
                        <% if(user.account == "superadmin"){ %>
                        <a class="dropdown-item text-danger" href="/moderate/delete/<%= topic._id %>"><i class="fas fa-trash link-elem"></i><span class="link-elem link-text">Delete</span></a>
                        <% } %>
                      </div>
                    </div>
                  </td>
                </tr>
                <% }); %>
              </tbody>
            </table>
          </div>

        </div>

      </div>
    </div>
  </div>
</body>

</html>
